<!doctype html>
<html>
  <head>
    <title>WAT WAT WAT</title>
    <link href='styles.css' rel='stylesheet' />
  </head>
  <body>
    <h1 id='WAT' data-text='WAT '>
      <span id='WAT-THE-SHADOW'>WAT </span><span class='block'>&#9612;</span>
    </h1>

    <hr class='scanline' />

    <script>
      var index = 0;
      var sequence = 'WAT ';
      var wat = document.getElementById('WAT');
      var shadow = document.getElementById('WAT-THE-SHADOW');

      var map = {
        32: ' ',
        65: 'A',
        84: 'T',
        87: 'W'
      }

      window.onkeydown = function(e) {
        var key = map[e.which];
        var str = shadow.innerHTML;

        if (key == sequence[index]) {
          str = str + key;
          shadow.innerHTML = str;
          wat.dataset.text = str;
          index = (index + 1) % sequence.length;
        } else if (e.which == 8) {
          e.preventDefault();

          if(str == '') {
            index = 0;
            return;
          }

          str = str.substr(-(str.length), str.length-1);
          shadow.innerHTML = str;
          wat.dataset.text = str;
          index = (index - 1) % sequence.length;

          if(index == -1){ index = sequence.length - 1 }
        }
      }
    </script>
  </body>
</html>
